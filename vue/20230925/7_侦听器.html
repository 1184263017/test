<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./js/vue.js"></script>
    <title>Document</title>
</head>

<body>
    <div id="app">

    </div>
    <template id="t1">
        <div>
            {{lastName}} {{firstName}}
            <hr>
            {{info}}
        </div>
    </template>
    <script>
        const vm = new Vue({
            // 挂载
            el: '#app',
            template: '#t1',
            // 存放数据
            data: {
                /* 
                    响应式属性
                    对象属性变化->视图也会变化
                */
                firstName: 'li',
                lastName: 'jack',
                info: {
                    age: 18,
                    size: {
                        w: 100,
                        h: 200
                    }
                }
            },
            /* 
                侦听器
                方法名和属性名同名，监视属性值的变化，变化时自动调用，没有缓存
            */
            watch: {
                // lastName(newValue, oldValue) {
                //     console.log('lastName', newValue, oldValue);
                // },
                // firstName(newValue, oldValue) {
                //     console.log('firstName', newValue, oldValue);
                // },
                // 'info.size.w'(newValue, oldValue) {
                //     console.log('info.size.w', newValue, oldValue);
                // },
                'info.age': {
                    // 获取新旧值并进行操作
                    handler(newValue, oldValue) {
                        console.log('info.age', newValue, oldValue);
                    },
                    // 初始化立即执行一次
                    immediate: true,
                },
                'info': {
                    // 获取新旧值并进行操作
                    handler(newValue, oldValue) {
                        console.log('info', newValue, oldValue);
                    },
                    // 初始化立即执行一次
                    immediate: true,
                    // 深层监听,递归监听,消耗资源
                    deep: true,
                }
            }
        });
        console.log(vm);
    </script>
</body>

</html>